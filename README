slide_captcha
============

CAPTCHAs getting too hard to read, even for a human? slide_captcha uses a slightly different approach, using an image with easily-read text, but one caveat for bots: the human must move a slider to line the text up properly. Humans can do this easily, but bots must transform the image and attempt text recognition multiple times.


Dependencies
============

Scriptaculous and Prototype http://script.aculo.us
Ruby/GD http://rubyforge.org/projects/ruby-gd/

Scriptaculous slider effects may not be available with all versions of Rails. If this is the case, copy slider.js from the plugin's public/javascripts to your public/javascripts directory.

Ruby/GD is required for image generation.


Setup
=====

Install:
script/plugin install git://github.com/jimworm/slide_captcha.git

Create tables:
rake db:migrate:slide_captcha:up

Build codes:
rake slide_captcha:build_codes

Generate images (takes about 60s on a 1.83GHz Intel Core 2 Duo with OSX):
rake slide_captcha:generate_images


Usage
=====

Include SlideCAPTCHA in your form with the following code:

<%= slide_captcha_tags %>

Verify responses by calling the following in your controller:

verify_slide_captcha(options)

Returns true if verified, false if the response is incorrect. Available options (optional) are
:model		=> A model to attach errors to, probably the object of your form.
:message	=> A custom error message.

Example usage:

if verify_slide_captcha(:model => @user, :message => "Robot test failed")
  @user.save
else
  render :action => :edit
end


Rake tasks
==========

rake db:migrate:slide_captcha:up
rake db:migrate:slide_captcha:down

Creates/drops tables "slide_captcha_codes", "slide_captcha_sessions"

***

rake slide_captcha:build_codes length=x n=y

Fills table "slide_captcha_codes" with y random codes x characters long.
Default: length=7 n=10000

***

rake slide_captcha:generate_images

Generates images for all codes in table "slide_captcha_codes", takes about 6s for 1000 images.

***

rake slide_captcha:expire_sessions before=x

Deletes rows in "slide_captcha_sessions" created before x, where x is a duration in Rails format eg. "60.minutes.ago".
Default: before=30.minutes.ago


TODO
====

* Further customization options
* Nicer configs

Copyright (c) 2010 Pete Hau, released under the MIT license
